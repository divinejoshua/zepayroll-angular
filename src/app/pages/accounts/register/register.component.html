<main>

  <!-- Top logo  -->
  <div class="flex mt-10 ml-10">
    <img class="" src="/assets/images/logo-no-bg.png" width="24" height="24">
    <h4 class="font-bold text-lg ml-2">Zepayroll</h4>
  </div>


  <div class="form-box mx-auto transition-in-bottom-top p-10">
    <h1 class="center text-3xl font-bold mt-32 sm:mt-1">Welcome to Zepayroll</h1>
    <p class="center mt-4">Login to get access to your account</p>

    <!-- Login form  -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">


      <div class="grid grid-cols-2 gap-6">

          Email
          <div class="mt-10 col-span-2">
            <label class="font-bold mt-3">Email</label>
            <input type="email" name="email" formControlName="email" placeholder="Enter email address"
              class="mt-3 form-control w-full pl-6 rounded-md border border-gray-300
                      focus:outline-none focus:border-default
                      focus:ring-default
                      focus:ring-0.5
                      focus:border-300
                      transition duration-0 hover:duration-150
                "
                [class]="loginForm.get('email')?.errors && validationActive  ? 'border-red-500' : ''">

                <!-- Email validation message  -->
              <ng-container *ngFor="let error of error_messages.email">
                <div class="absolute text-red-500 float-left text-sm pt-1" *ngIf="loginForm.get('email')?.hasError(error.type) && validationActive">
                  {{ error.message }}
                </div>
              </ng-container>

            </div>

          <!-- Username  -->
          <div class="col-span-2 mt-2">
            <label class="font-bold mt-3">Username</label>
            <input type="text" name="username" formControlName="username" placeholder="Enter username"
              class="mt-3 form-control w-full pl-6 rounded-md border border-gray-300
                      focus:outline-none focus:border-default
                      focus:ring-default
                      focus:ring-0.5
                      focus:border-300
                      transition duration-0 hover:duration-150
                "
                [class]="loginForm.get('username')?.errors && validationActive  ? 'border-red-500' : ''">

                  <!-- Error messages  -->
                <ng-container *ngFor="let error of error_messages.username">
                  <div class="absolute text-red-500 float-left text-sm pt-1" *ngIf="loginForm.get('username')?.hasError(error.type) && validationActive">
                    {{ error.message }}
                  </div>

                </ng-container>
          </div>


          <!-- Password  -->
          <div class="col-span-2 sm:col-span-1 mt-2">
            <label class="font-bold mt-3">Password</label>

            <input [type]="'password'" name="password" formControlName="password" placeholder="Enter you password" autocomplete="true"
                class="mt-3 form-control w-full pl-6 rounded-md border border-gray-300
                        focus:outline-none focus:border-default
                        focus:ring-default
                        focus:ring-0.5
                        focus:border-300
                        transition duration-0 hover:duration-150
                  "
                  [class]="loginForm.get('password')?.errors && validationActive  ? 'border-red-500' : ''">

                  <!-- Error messages  -->
                  <ng-container *ngFor="let error of error_messages.password">
                    <div class="text-red-500 col-span-1 float-left text-sm pt-1" *ngIf="loginForm.get('password')?.hasError(error.type) && validationActive">
                      {{ error.message }}
                    </div>

                  </ng-container>

            </div>

             <!--Confirm Password  -->
          <div class="col-span-2 sm:col-span-1 mt-2">
            <label class="font-bold mt-3">Confirm Password</label>

            <input [type]="'password'" name="confirmPassword" formControlName="confirmPassword" placeholder="Confirm password" autocomplete="true"
                class="mt-3 form-control w-full pl-6 rounded-md border border-gray-300
                        focus:outline-none focus:border-default
                        focus:ring-default
                        focus:ring-0.5
                        focus:border-300
                        transition duration-0 hover:duration-150
                  "
                  [class]="loginForm.get('confirmPassword')?.errors && validationActive  ? 'border-red-500' : ''">

                  <!-- Error message  -->
                  <ng-container *ngFor="let error of error_messages.confirmPassword">
                    <div class="text-red-500 col-span-1 float-left text-sm pt-1" *ngIf="loginForm.get('confirmPassword')?.hasError(error.type) && validationActive">
                      {{ error.message }}
                    </div>


                    <!-- Password matching validation -->
                    <!-- //NOTE: Custom validations neeed their own messages on the html template -->
                    <div class="text-red-500 col-span-1 float-left text-sm pt-1" *ngIf="loginForm.errors?.['passwordNotMatch'] && !loginForm.get('confirmPassword')?.hasError(error.type) && validationActive">
                      Passwords do not match
                    </div>

                  </ng-container>

            </div>

            <p class="mt-4 col-span-2 font-color-777 font-size-small">By registering, you agree to our  <span class="text-default underline decoration-default">Terms of use </span> and  <span class="text-default underline decoration-default">Privacy Policy</span>.</p>


              <!-- Submit button  -->
              <button type="submit "
                [disabled]="isLoading"
                [class]="[animateErrorBtn ? 'form-auth-btn-error' : '', isLoading ? 'form-auth-btn-disabled' : '']"
                class="inline-flex items-center font-weight-medium col-span-2 w-full place-content-center mt-2 form-auth-btn text-lg bg-default transition duration-0 hover:duration-150"
                >
                <div *ngIf="isLoading" class="dot-falling"></div>
              <span *ngIf="!isLoading" class="text-white"> Register </span>
            </button>


      </div>
    </form>

    <p class="mt-7 text-gray-400">Already have an account? <a routerLink="/accounts/login" class="text-default font-bold cursor-pointer" >login here </a></p>


  </div>
</main>
